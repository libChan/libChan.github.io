<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts | Xinru Shan</title>
    <link>https://libchan.github.io/post/</link>
      <atom:link href="https://libchan.github.io/post/index.xml" rel="self" type="application/rss+xml" />
    <description>Posts</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><lastBuildDate>Sun, 23 Jul 2023 23:09:59 +0800</lastBuildDate>
    <image>
      <url>https://libchan.github.io/media/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_3.png</url>
      <title>Posts</title>
      <link>https://libchan.github.io/post/</link>
    </image>
    
    <item>
      <title>[DDIA]数据复制</title>
      <link>https://libchan.github.io/post/ddia_data_copy/</link>
      <pubDate>Sun, 23 Jul 2023 23:09:59 +0800</pubDate>
      <guid>https://libchan.github.io/post/ddia_data_copy/</guid>
      <description>&lt;h1 id=&#34;数据复制&#34;&gt;数据复制&lt;/h1&gt;
&lt;h2 id=&#34;数据复制的目的&#34;&gt;数据复制的目的&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;高可用：一个节点挂掉时，整个系统还有其他节点可以工作。&lt;/li&gt;
&lt;li&gt;低延迟：使数据在地理位置上更靠近用户，降低网络延迟。&lt;/li&gt;
&lt;li&gt;高吞吐：多个节点可访问，提高系统整体吞吐量。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;主从复制&#34;&gt;主从复制&lt;/h2&gt;
&lt;p&gt;主从复制指，系统有一个主节点，多个从节点，写请求只发送给主节点，主写入本地后，发送日志给从节点，从节点进行更新。主节点和从节点都可以接收读请求。
主从复制需要考虑的问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;调节同步和异步复制的节点比例，这会影响系统的吞吐，延迟，数据更新比例等。&lt;/li&gt;
&lt;li&gt;从节点新增/恢复。从本地或向主节点请求某时刻的日志snapshot，执行后继续从主节点同步后续日志。&lt;/li&gt;
&lt;li&gt;主节点挂掉：确认主节点挂掉的条件，leader选举，重新配置主节点。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;日志复制：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于语句：将主节点执行的语句发送到从节点。&lt;/li&gt;
&lt;li&gt;基于预写日志（WAL）：对于追加写到日志的，可以将日志发送给从节点。&lt;em&gt;缺点：日志描述的数据非常底层。（不理解）&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;基于行的逻辑日志：将复制和存储方式分离。复制日志是一种逻辑日志，并不真正实现存储。MySQL的二进制binlog是采用这种方式。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;复制滞后可能出现的问题&#34;&gt;复制滞后可能出现的问题&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;读自己的写不一致：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对于客户端有权限修改的内容，读主节点，否则读从节点。但对于大家都有权限修改的内容，就失效了。&lt;/li&gt;
&lt;li&gt;客户端记录写的时间，读的时间小于1min，读主节点，否则读从节点。这对阈值的设置要求比较高。&lt;/li&gt;
&lt;li&gt;客户端维护最近写的时间戳，附带在读请求。当节点包含该时间戳的更新，才返回结果。但理论上不同节点的时间无法完全一致。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;单调读：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;当前一次读的内容新于后一次读，比如第一次看到数据，再刷新数据消失。可能是由于第一次读的节点数据更新了，第二次读的节点数据未更新。&lt;/p&gt;
&lt;p&gt;单调读一致性是指，用户多次读取，不会看到版本回滚的现象。&lt;/p&gt;
&lt;p&gt;实现单调读的方法：确保用户每次都读一个节点，可以对用户id进行hash，路由到节点。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;前缀一致读：&lt;/strong&gt;
对于一系列按照顺序发生的写请求，读取时也需要按照写入顺序读取。&lt;/p&gt;
&lt;h2 id=&#34;多主复制&#34;&gt;多主复制&lt;/h2&gt;
&lt;p&gt;每个主节点都可以接受写请求，同时是其他主节点的从节点。多主节点的结构&lt;strong&gt;适用于多数据中心&lt;/strong&gt;的场景。多数据中心一般在不同region，为了靠近用户。但如果只有一个主节点，在一个数据中心，则失去了按region分配的意义。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;数据中心内主从模型，所有数据中心构成多主模型。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;多主复制的优势：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;多主提高整个系统的吞吐&lt;/li&gt;
&lt;li&gt;更高容错，一个主节点挂掉，数据中心内再选举一个主节点，不需要垮数据中心选举，不会造成网络负担大。&lt;/li&gt;
&lt;li&gt;多主节点之间采用异步复制，网络失效影响较小。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;多主复制的问题：不同数据中心同时修改相同的数据，需要处理写冲突。解决方案：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;避免冲突：在应用层避免写入冲突。例如用户更新自己的数据，写请求只路由到特定的数据中心。但如果数据中心故障，或者用户去其他位置，则需要解决数据中心之间的冲突。&lt;/li&gt;
&lt;li&gt;收敛到一致状态：比如每个用户提供写入时间戳，按顺序写入。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;自动冲突解决：规则可能变得很复杂，有一些从数据结构和算法层面解决冲突的方案：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;无冲突的复制数据类型（CRDT），可以由多个用户同时编辑，以内置方法解决冲突。&lt;/li&gt;
&lt;li&gt;可合并的持久数据结构：像Git一样跟踪版本，提出&lt;em&gt;三向合并功能&lt;/em&gt;。&lt;/li&gt;
&lt;li&gt;操作转换：是Etherpad和Google Docs的冲突解决算法。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;无主复制&#34;&gt;无主复制&lt;/h2&gt;
&lt;p&gt;没有主节点，去中心复制，每个节点都可以接受写请求。Amazon内部的Dynamo掀起一阵无主复制的热潮。&lt;/p&gt;
&lt;p&gt;无主节点系统的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;读修复：client的读同时请求到多个节点，对比version，将version最新的作为结果。&lt;/li&gt;
&lt;li&gt;反熵：background进程扫描节点之间副本的差异，并复制。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Q: 怎么判断无主系统处理读写请求时，是最新状态？&lt;/p&gt;
&lt;p&gt;假设有n个节点，写入需要w个节点确认，读取需要r个节点确认，则w+r&amp;gt;n，读取的节点中一定包含最新值，w和r有overlap。将w和r成为法定票数写和法定票数读，用于判断读和写是否有效。&lt;/p&gt;
&lt;p&gt;Q: 如果此时系统因为一些原因，例如网络问题，导致无法满足w和r，怎么处理？&lt;/p&gt;
&lt;p&gt;可以采用sloppy quorum，允许w个写入和r个读，但可以不在指定的n个节点。这里应该是集群比较大，n不是全部节点数，有备用节点的情况。等问题修复好，再同步到n个节点。但在sloppy quorum下，即便满足w+r&amp;gt;n，也不保证读到最新值。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Welcome to Wowchemy, the website builder for Hugo</title>
      <link>https://libchan.github.io/post/getting-started/</link>
      <pubDate>Sun, 13 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://libchan.github.io/post/getting-started/</guid>
      <description>&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;The Wowchemy website builder for Hugo, along with its starter templates, is designed for professional creators, educators, and teams/organizations - although it can be used to create any kind of site&lt;/li&gt;
&lt;li&gt;The template can be modified and customised to suit your needs. It&amp;rsquo;s a good platform for anyone looking to take control of their data and online identity whilst having the convenience to start off with a &lt;strong&gt;no-code solution (write in Markdown and customize with YAML parameters)&lt;/strong&gt; and having &lt;strong&gt;flexibility to later add even deeper personalization with HTML and CSS&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;You can work with all your favourite tools and apps with hundreds of plugins and integrations to speed up your workflows, interact with your readers, and much more&lt;/li&gt;
&lt;/ol&gt;














&lt;figure  id=&#34;figure-the-template-is-mobile-first-with-a-responsive-design-to-ensure-that-your-site-looks-stunning-on-every-device&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://raw.githubusercontent.com/wowchemy/wowchemy-hugo-modules/master/academic.png&#34; alt=&#34;The template is mobile first with a responsive design to ensure that your site looks stunning on every device.&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      The template is mobile first with a responsive design to ensure that your site looks stunning on every device.
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;h2 id=&#34;get-started&#34;&gt;Get Started&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;👉 &lt;a href=&#34;https://wowchemy.com/templates/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Create a new site&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;📚 &lt;a href=&#34;https://wowchemy.com/docs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Personalize your site&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;💬 &lt;a href=&#34;https://discord.gg/z8wNYzb&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Chat with the &lt;strong&gt;Wowchemy community&lt;/strong&gt;&lt;/a&gt; or &lt;a href=&#34;https://discourse.gohugo.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Hugo community&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;🐦 Twitter: &lt;a href=&#34;https://twitter.com/wowchemy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@wowchemy&lt;/a&gt; &lt;a href=&#34;https://twitter.com/GeorgeCushen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@GeorgeCushen&lt;/a&gt; &lt;a href=&#34;https://twitter.com/search?q=%28%23MadeWithWowchemy%20OR%20%23MadeWithAcademic%29&amp;amp;src=typed_query&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;#MadeWithWowchemy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;💡 &lt;a href=&#34;https://github.com/wowchemy/wowchemy-hugo-modules/issues&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Request a &lt;strong&gt;feature&lt;/strong&gt; or report a &lt;strong&gt;bug&lt;/strong&gt; for &lt;em&gt;Wowchemy&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;⬆️ &lt;strong&gt;Updating Wowchemy?&lt;/strong&gt; View the &lt;a href=&#34;https://wowchemy.com/docs/guide/update/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Update Guide&lt;/a&gt; and &lt;a href=&#34;https://wowchemy.com/updates/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Release Notes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;crowd-funded-open-source-software&#34;&gt;Crowd-funded open-source software&lt;/h2&gt;
&lt;p&gt;To help us develop this template and software sustainably under the MIT license, we ask all individuals and businesses that use it to help support its ongoing maintenance and development via sponsorship.&lt;/p&gt;
&lt;h3 id=&#34;-click-here-to-become-a-sponsor-and-help-support-wowchemys-future-httpswowchemycomplans&#34;&gt;&lt;a href=&#34;https://wowchemy.com/plans/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;❤️ Click here to become a sponsor and help support Wowchemy&amp;rsquo;s future ❤️&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;As a token of appreciation for sponsoring, you can &lt;strong&gt;unlock &lt;a href=&#34;https://wowchemy.com/plans/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;these&lt;/a&gt; awesome rewards and extra features 🦄✨&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;ecosystem&#34;&gt;Ecosystem&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/wowchemy/hugo-academic-cli&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Hugo Academic CLI&lt;/a&gt;:&lt;/strong&gt; Automatically import publications from BibTeX&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;inspiration&#34;&gt;Inspiration&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://academic-demo.netlify.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Check out the latest &lt;strong&gt;demo&lt;/strong&gt;&lt;/a&gt; of what you&amp;rsquo;ll get in less than 10 minutes, or &lt;a href=&#34;https://wowchemy.com/user-stories/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;view the &lt;strong&gt;showcase&lt;/strong&gt;&lt;/a&gt; of personal, project, and business sites.&lt;/p&gt;
&lt;h2 id=&#34;features&#34;&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Page builder&lt;/strong&gt; - Create &lt;em&gt;anything&lt;/em&gt; with &lt;a href=&#34;https://wowchemy.com/docs/page-builder/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;widgets&lt;/strong&gt;&lt;/a&gt; and &lt;a href=&#34;https://wowchemy.com/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;elements&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Edit any type of content&lt;/strong&gt; - Blog posts, publications, talks, slides, projects, and more!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Create content&lt;/strong&gt; in &lt;a href=&#34;https://wowchemy.com/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Markdown&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;https://wowchemy.com/docs/import/jupyter/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Jupyter&lt;/strong&gt;&lt;/a&gt;, or &lt;a href=&#34;https://wowchemy.com/docs/install-locally/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;RStudio&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Plugin System&lt;/strong&gt; - Fully customizable &lt;a href=&#34;https://wowchemy.com/docs/customization/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;color&lt;/strong&gt; and &lt;strong&gt;font themes&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Display Code and Math&lt;/strong&gt; - Code highlighting and &lt;a href=&#34;https://en.wikibooks.org/wiki/LaTeX/Mathematics&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LaTeX math&lt;/a&gt; supported&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Integrations&lt;/strong&gt; - &lt;a href=&#34;https://analytics.google.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google Analytics&lt;/a&gt;, &lt;a href=&#34;https://disqus.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Disqus commenting&lt;/a&gt;, Maps, Contact Forms, and more!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Beautiful Site&lt;/strong&gt; - Simple and refreshing one page design&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Industry-Leading SEO&lt;/strong&gt; - Help get your website found on search engines and social media&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Media Galleries&lt;/strong&gt; - Display your images and videos with captions in a customizable gallery&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mobile Friendly&lt;/strong&gt; - Look amazing on every screen with a mobile friendly version of your site&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multi-language&lt;/strong&gt; - 34+ language packs including English, 中文, and Português&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multi-user&lt;/strong&gt; - Each author gets their own profile page&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Privacy Pack&lt;/strong&gt; - Assists with GDPR&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Stand Out&lt;/strong&gt; - Bring your site to life with animation, parallax backgrounds, and scroll effects&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;One-Click Deployment&lt;/strong&gt; - No servers. No databases. Only files.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;themes&#34;&gt;Themes&lt;/h2&gt;
&lt;p&gt;Wowchemy and its templates come with &lt;strong&gt;automatic day (light) and night (dark) mode&lt;/strong&gt; built-in. Alternatively, visitors can choose their preferred mode - click the moon icon in the top right of the &lt;a href=&#34;https://academic-demo.netlify.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Demo&lt;/a&gt; to see it in action! Day/night mode can also be disabled by the site admin in &lt;code&gt;params.toml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://wowchemy.com/docs/customization&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Choose a stunning &lt;strong&gt;theme&lt;/strong&gt; and &lt;strong&gt;font&lt;/strong&gt;&lt;/a&gt; for your site. Themes are fully customizable.&lt;/p&gt;
&lt;h2 id=&#34;license&#34;&gt;License&lt;/h2&gt;
&lt;p&gt;Copyright 2016-present &lt;a href=&#34;https://georgecushen.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;George Cushen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Released under the &lt;a href=&#34;https://github.com/wowchemy/wowchemy-hugo-modules/blob/master/LICENSE.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MIT&lt;/a&gt; license.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
